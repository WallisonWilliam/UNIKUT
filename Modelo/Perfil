package Unikut.Modelo;

import java.util.Scanner;
import Unikut.Controle.Conta;
import Unikut.Controle.Node;

public class Perfil {
    Scanner in = new Scanner (System.in);
    Scanner input = new Scanner (System.in);
    Node aux;

    public void editarNome(Node listCont, Conta cont) {
        char opNome;
        String nome;
        System.out.println("Deseja registrar ou alterar o seu nome? Se sim, digite s. Se não, digite n.");
        System.out.print("Digite aqui: ");
        opNome = in.next().charAt(0);
        opNome = Character.toLowerCase(opNome);
        while (opNome != 's' && opNome != 'n') {
            System.out.print("Opção inválida. Informe novamente: ");
            opNome = in.next().charAt(0);
            opNome = Character.toLowerCase(opNome);
        }
        if (opNome == 's') {
            System.out.print("Informe aqui o seu nome: ");
            nome = input.nextLine();
            cont.setNome(nome);
            System.out.println("Nome cadastrado no perfil.");
        }
        else {
            cont.setNome("Convidado");
            System.out.println("O seu nome no perfil aparecerá como convidado.");
        }
        listCont.setInfo(cont);
        System.out.print("Os seus outros dados no perfil aparecerão como sem informação. ");
        System.out.println("Caso deseje registrar as suas informações, clique em editar perfil quando estiver logado na Unikut.");
    }

    public boolean entrarPerf(ListaUnikut listCont, Conta cont) {
        aux = listCont.buscaList(cont);
        if (listCont.isEmpty() == true) {
            System.out.println("Nenhuma conta foi cadastrada na Unikut.");
        }
        else {
            if (aux == null) {
                System.out.println("Conta informada não está listada.");
            }
            else if (aux.getInfo().getSenha().compareTo(cont.getSenha()) != 0) {
                System.out.println("Senha incorreta.");
            }
            else {
                System.out.println("Seja bem-vindo.");
                System.out.println();
                return true;
            }
        }
        return false;
    }

    public void vizlPerf(ListaUnikut listCont, Conta cont) {
        aux = listCont.buscaList(cont);
        System.out.println(aux.getInfo());
    }

    public void alterPerf(ListaUnikut listCont, Conta cont) {
        char opAlt;
        String altera;
        aux = listCont.buscaList(cont);
        menuAlter();
        do {
            System.out.println();
            System.out.println("Menu de alteracão.");
            System.out.println("Digite 8 para exibir o menu de alterações novamente.");
            System.out.print("Digite aqui: ");
            opAlt = in.next().charAt(0);
            if (opAlt == '1') {
                System.out.print("Informe a sua nova senha: ");
                altera = input.nextLine();
                cont.setSenha(altera);
            }
            else if (opAlt == '2') {
                editarNome(aux, cont);
            }
            else if (opAlt == '3') {
                System.out.print("Informe a sua idade: ");
                altera = input.nextLine();
                cont.setIdade(altera);
            }
            else if (opAlt == '4') {
                System.out.print("Informe o seu gênero: ");
                altera = input.nextLine();
                cont.setGenero(altera);
            }
            else if (opAlt == '5') {
                System.out.print("Informe a data do seu aniversário: ");
                altera = input.nextLine();
                cont.setAnivers(altera);
            }
            else if (opAlt == '6') {
                System.out.print("Informe o seu estado civil: ");
                altera = input.nextLine();
                cont.setEstadCiv(altera);
            }
            else if (opAlt == '7') {
                System.out.print("Informe uma descrição para o seu perfil: ");
                altera = input.nextLine();
                cont.setDescric(altera);
            }
            else if (opAlt == '8') {
                menuAlter();
            }
            else if (opAlt == '0') {
                System.out.println("Voltando para o menu do perfil.");
            }
            else {
                System.out.println("Opção inválida.");
            }
            System.out.println(cont.getNome());
        } while (opAlt != '0');
        aux.setInfo(cont);
    }

    private void menuAlter() {
        System.out.println("Opções do menu de alteração:");
        System.out.println("1 - Senha.");
        System.out.println("2 - Nome.");
        System.out.println("3 - Idade.");
        System.out.println("4 - Gênero.");
        System.out.println("5 - Aniversário.");
        System.out.println("6 - Estado civil.");
        System.out.println("7 - Descrição do seu perfil.");
        System.out.println("0 - Voltar para o menu inicial.");
    }
}
