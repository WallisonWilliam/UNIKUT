package modelo;

import java.util.Scanner;

import controle.Conta;
import controle.Node;
import static visualizacao.Cores.*;

public class Perfil {
	Scanner in = new Scanner(System.in);
	Scanner input = new Scanner(System.in);
	Node aux;

	public void editarNome(Node aux) {
		char opNome;
		String nome;
		Conta editaNome;
		editaNome = aux.getInfo();
		System.out.print(ANSI_BLUE + "Deseja registrar ou alterar o seu nome? Se sim, digite s.");
		System.out.println(" Se nao, digite n (o perfil ficara como anonimo)." + ANSI_RESET);
		System.out.print(ANSI_YELLOW + "Digite aqui: " + ANSI_RESET);
		opNome = in.next().charAt(0);
		opNome = Character.toLowerCase(opNome);
		while (opNome != 's' && opNome != 'n') {
			System.out.print(ANSI_RED + "Op√ßao invalida. Informe novamente: " + ANSI_RESET);
			opNome = in.next().charAt(0);
			opNome = Character.toLowerCase(opNome);
		}
		if (opNome == 's') {
			System.out.print(ANSI_YELLOW + "Informe aqui o seu nome: " + ANSI_RESET);
			nome = input.nextLine();
			editaNome.setNome(nome);
			System.out.println(ANSI_WHITE + "Nome cadastrado no perfil." + ANSI_RESET);
		} else {
			editaNome.setNome("Convidado");
			System.out.println(ANSI_WHITE + "O seu nome no perfil aparecera como convidado." + ANSI_RESET);
		}
	}

	public boolean entrarPerf(ListaUnikut listCont, Conta cont) {
		aux = listCont.buscaList(cont);
		if (listCont.isEmpty() == true) {
			System.out.println(ANSI_RED + "Nenhuma conta foi cadastrada na Unikut." + ANSI_RESET);
		} else {
			if (aux == null) {
				System.out.println(ANSI_RED + "Conta informada nao esta listada." + ANSI_RESET);
			} else if (aux.getInfo().getSenha().compareTo(cont.getSenha()) != 0) {
				System.out.println(ANSI_RED + "Senha incorreta." + ANSI_RESET);
			} else {
				System.out.println(ANSI_WHITE + "Seja bem-vindo." + ANSI_RESET);
				System.out.println();
				return true;
			}
		}
		return false;
	}

	public void vizlPerf(ListaUnikut listCont, Conta cont) {
		aux = listCont.buscaList(cont);
		System.out.println(aux.getInfo());
	}

	public void alterPerf(ListaUnikut listCont, Conta cont) {
		char opAlt;
		String altera, cor;
		Conta contaEdita;
		aux = listCont.buscaList(cont);
		contaEdita = aux.getInfo();
		menuAlter();
		do {
			System.out.println(ANSI_RESET);
			System.out.println(ANSI_GREEN + "Menu de alteracao." + ANSI_GREEN);
			System.out.println(ANSI_YELLOW + "Digite 8 para exibir o menu de alteracoes novamente.");
			System.out.print("Digite aqui: " + ANSI_RESET);
			opAlt = in.next().charAt(0);
			if (opAlt == '1') {
				System.out.print(ANSI_YELLOW + "Informe a sua nova senha: ");
				altera = input.nextLine();
				contaEdita.setSenha(altera);
			} else if (opAlt == '2') {
				editarNome(aux);
			} else if (opAlt == '3') {
				System.out.print(ANSI_YELLOW + "Informe a sua idade: ");
				altera = input.nextLine();
				contaEdita.setIdade(altera);
			} else if (opAlt == '4') {
				System.out.print(ANSI_YELLOW + "Informe o seu genero: ");
				altera = input.nextLine();
				contaEdita.setGenero(altera);
			} else if (opAlt == '5') {
				System.out.print(ANSI_YELLOW + "Informe a data do seu aniversario: ");
				altera = input.nextLine();
				contaEdita.setAnivers(altera);
			} else if (opAlt == '6') {
				System.out.print(ANSI_YELLOW + "Informe o seu estado civil: ");
				altera = input.nextLine();
				contaEdita.setEstadCiv(altera);
			} else if (opAlt == '7') {
				System.out.print(ANSI_YELLOW + "Informe uma descricao para o seu perfil: ");
				altera = input.nextLine();
				contaEdita.setDescric(altera);
			} else if (opAlt == '8') {
				menuAlter();
			} else if (opAlt == '0') {
				System.out.println(ANSI_GREEN + "Voltando para o menu do perfil.");
			} else {
				System.out.println(ANSI_RED + "Opcao invalida.");
			}
		} while (opAlt != '0');
	}

	private void menuAlter() {
		System.out.println(ANSI_GREEN + "Opcoes do menu de alteracao:");
		System.out.println("1 - Senha.");
		System.out.println("2 - Nome.");
		System.out.println("3 - Idade.");
		System.out.println("4 - Genero.");
		System.out.println("5 - Aniversario.");
		System.out.println("6 - Estado civil.");
		System.out.println("7 - Descricao do seu perfil.");
		System.out.println("0 - Voltar para o menu inicial.");
	}
}
