package Unikut.Modelo;

import java.util.Scanner;
import Unikut.Controle.Conta;
import Unikut.Controle.Node;

public class AmigoUnikut {
    Scanner in = new Scanner (System.in);
    Scanner input = new Scanner (System.in);
    Node aux, aux2;
    ListaUnikut listAmg = new ListaUnikut();
    Conta contAmg;

    public void opAmigo(ListaUnikut listCont, Conta cont) {
        char opAmg;
        String emailAmg;
        boolean validAmg, nome = false;
        MenuAmg();
        do {
            System.out.println();
            System.out.println("Digite 4 para ver o menu novamente.");
            System.out.print("Digite aqui: ");
            opAmg = in.next().charAt(0);
            if (opAmg == '1') {
                System.out.print("Informe o email do usuário que deseja formar amizade: ");
                emailAmg = input.nextLine();
                contAmg = new Conta(emailAmg);
                aux = listCont.buscaList(contAmg);
                if (aux == null) {
                    System.out.println("O usuário não faz parte da Unikut.");
                }
                else {
                    if (aux.getInfo().equals(cont) == true) {
                        System.out.println("Não é possivel mandar uma solicitação para si mesmo.");
                    }
                    else {
                        validAmg = listAmg.incerirConta(contAmg, nome);
                        if (validAmg == true) {
                            aux.setStatusAmg("Pendente");
                            System.out.println("Solicitação enviada. O status de amizade ficará como pendente.");
                        }
                        else {
                            System.out.println("O usuário é seu amigo ou já está na sua lista de solicitações.");
                        }
                    }
                }
            }
            else if (opAmg == '2') {
                listAmg.vizlAmg();
            }
            /*
            else if (opAmg == '3') {
                System.out.print("Informe o email do usuário desejado: ");
                emailAmg = input.nextLine();
                contAmg = new Conta(emailAmg);
                aux2 = listAmg.buscaList(contAmg);
                if (aux2.getStatusAmg().compareTo("Pendente") == 0) {
                    aux2.setStatusAmg("Amigos");
                    System.out.println("Solicitação aceita.");
                }
                else {
                    System.out.println("O usuário já é seu amigo na Unikut.");
                }
            }
            */
            else if (opAmg == '4') {
                MenuAmg();
            }
            else if (opAmg == '0') {
                System.out.println("Voltando para o menu do perfil.");
            }
            else {
                System.out.println("Opção inválida.");
            }
        } while (opAmg != '0');
    }

    public void MenuAmg() {
        System.out.println("Opções do menu de amigos:");
        System.out.println("1 - Enviar uma socilitação de amizade.");
        System.out.println("2 - Visualizar status de amizade.");
        System.out.println("3 - Aceitar socilitações de amizade");
        System.out.println("0 - Voltar para o menu inicial.");
    }
}
