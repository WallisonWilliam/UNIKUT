package visualizacao;

import java.util.Scanner;

import controle.Conta;
import modelo.AmigoUnikut;
import modelo.ListaUnikut;
import modelo.Perfil;
import modelo.RecadoUnikut;
import static visualizacao.Cores.*;

public class Interface {
  public static void main(String[] args) {
     Scanner in = new Scanner(System.in);
     Scanner input = new Scanner(System.in);
     char opCont, opPerf;
     boolean validCont;
     String email, senha;
     Conta cont;
     ListaUnikut listCont = new ListaUnikut();
     Perfil perf = new Perfil();
     AmigoUnikut opAmg = new AmigoUnikut();
     RecadoUnikut opRec = new RecadoUnikut();
     System.out.println();
     System.out.println(ANSI_WHITE + "Bem-vindo a rede social Unikut." + ANSI_RESET);
     do {
        System.out.println();
        System.out.println(ANSI_BLUE + "Deseja cadastrar uma conta? Se sim, digite 1.");
        System.out.println("Se voce ja e cadastrado aqui, digite 2 para logar.");
        System.out.println("Digite 0 para fechar a pagina da rede social." + ANSI_RESET);
        System.out.print(ANSI_YELLOW + "Digite aqui: " + ANSI_RESET);
        opCont = in.next().charAt(0);
        if (opCont == '1' || opCont == '2') {
           System.out.print(ANSI_YELLOW + "Digite as informa√ßoes necessarias para a verificacao de conta ");
           System.out.println("(Voce nao podera trocar o email depois de ter logado!).");
           System.out.print("Email: ");
           email = input.nextLine();
           System.out.print("Senha: " + ANSI_RESET);
           senha = input.nextLine();
           cont = new Conta(email, senha);
           if (opCont == '1') {
              menuCadastrar(cont, listCont);
           } else {
              validCont = perf.entrarPerf(listCont, cont);
              if (validCont == true) {
                 menuUnikut();
                 do {
                    System.out.println(ANSI_RESET);
                    System.out.println(ANSI_BLUE + "Menu do perfil." + ANSI_RESET);
                    System.out.println(ANSI_YELLOW + "Digite 5 para ver o menu novamente.");
                    System.out.print("Informe a sua opcao desejada: " + ANSI_RESET);
                    opPerf = in.next().charAt(0);
                    if (opPerf == '1') {
                       perf.vizlPerf(listCont, cont);
                    } else if (opPerf == '2') {
                       perf.alterPerf(listCont, cont);
                    } else if (opPerf == '3') {
                       opAmg.opAmigo(listCont, cont);
                    } else if (opPerf == '4') {
                       opRec.opRecados(listCont, cont);
                    } else if (opPerf == '5') {
                       menuUnikut();
                    } else if (opPerf == '0') {
                       System.out.println(ANSI_WHITE + "Esperamos te ver de novo por aqui." + ANSI_RESET);
                    } else {
                       System.out.println(ANSI_RED + "Opcao invalida.");
                    }
                 } while (opPerf != '0');
              }
           }
        } else if (opCont == '3') {
           listCont.exibCont();
        } else if (opCont == '0') {
           System.out.println(ANSI_WHITE + "Volte sempre aqui." + ANSI_RESET);
        } else {
           System.out.println(ANSI_RED + "Opcao invalida." + ANSI_RESET);
        }
     } while (opCont != '0');
  }

  public static void menuCadastrar(Conta cont, ListaUnikut listCont) {
     boolean valido, nome = true;
     valido = listCont.incerirConta(cont, nome);
     if (valido == true) {
        System.out.println(ANSI_GREEN + "Conta cadastrada.");
        System.out.print("Os seus outros dados no perfil aparecerao como sem informacao. ");
        System.out.print("Caso queira exibir os seus dados,");
        System.out.println(" clique em editar perfil quando estiver logado na Unikut." + ANSI_RESET);
     } else {
        System.out.println(ANSI_RED + "Email cadastrado anteriormente. Tente outro email." + ANSI_RESET);
     }
  }

  public static void menuUnikut() {
     System.out.println(ANSI_BLUE + "Opcoes da rede social Unikut:");
     System.out.println("1 - Visualizar perfil.");
     System.out.println("2 - Editar perfil.");
     System.out.println("3 - Opcoes para a lista de amigos.");
     System.out.println("4 - Opcoes de recados para lista de amigos.");
     System.out.println("0 - Desconectar da sua conta.");
  }
}
